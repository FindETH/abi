import { encodeString } from './string';

describe('decodeString', () => {
  it('decodes an array', () => {
    // TODO: Currently does not work
    /*const value = Buffer.from('0000000000000000000000000000000000000000000000000000000000000020', 'hex');
    const buffer = Buffer.from('000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000054c6f72656d20697073756d20646f6c6f722073697420616d65742c20636f6e73656374657475722061646970697363696e6720656c69742e2050656c6c656e746573717565206c6f626f727469732070756c76696e6172206469616d20657520736f64616c65732e2050726f696e20706c6163657261742073697420616d6574000000000000000000000000206d6175726973206e6f6e20766976657272612e', 'hex');

    expect(decodeString(value, buffer, 'string')).toBe('Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque lobortis pulvinar diam eu sodales. Proin placerat sit amet mauris non viverra.');*/
  });
});

describe('encodeString', () => {
  it('encodes a string', () => {
    const target = Buffer.alloc(0);
    const value = 'foo bar baz qux';

    expect(encodeString(target, value, 0, 'string').toString('hex')).toBe(
      '000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000666f6f206261722062617a20717578'
    );
  });

  it('encodes a long string', () => {
    const target = Buffer.alloc(0);
    const value =
      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque lobortis pulvinar diam eu sodales. Proin placerat sit amet mauris non viverra.';

    expect(encodeString(target, value, 0, 'string').toString('hex')).toBe(
      '000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000054c6f72656d20697073756d20646f6c6f722073697420616d65742c20636f6e73656374657475722061646970697363696e6720656c69742e2050656c6c656e746573717565206c6f626f727469732070756c76696e6172206469616d20657520736f64616c65732e2050726f696e20706c6163657261742073697420616d6574000000000000000000000000206d6175726973206e6f6e20766976657272612e'
    );
  });
});
